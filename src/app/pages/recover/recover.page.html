<!-- <ion-header>
  <ion-toolbar>
    <ion-title>recover</ion-title>
  </ion-toolbar>
</ion-header> -->

<ion-content class="login">

  
  <div>

    <div class="center-item">

      <img src="assets/logo.png" alt="" class="logo">

      <form class="form" *ngIf="step == 1" [formGroup]="validations_form" (ngSubmit)="sendCode(validations_form.value)">
          
        <ion-list>

          <ion-item class="ion-no-padding" lines="none">
            <!-- <ion-label position="floating">Email</ion-label>
            <ion-input formControlName="email" type="email"></ion-input> -->

            <div class="form-group">
              <div class="icon-prepend">
                <ion-icon name="person"></ion-icon>
              </div>
              <input formControlName="email" placeholder="E-mail" type="email">
            </div>

          </ion-item>
            <div class="validation-errors">
                    <ng-container *ngFor="let validation of validation_messages.email">
                      <div class="error-message" *ngIf="validations_form.get('email').hasError(validation.type) && (validations_form.get('email').dirty || validations_form.get('email').touched)">
                        {{ validation.message }}
                      </div>
                    </ng-container>
                  </div>

        </ion-list>

        <button type="submit" class="bmb-btn t-4" [disabled]="!validations_form.valid">Enviar código</button>

        <br>

        <span class="already">Ya tengo una cuenta, <span [routerLink]="['/login']" routerDirection="root">Acceder</span></span>

      </form>

      <form class="form" *ngIf="step == 2" [formGroup]="validations_form1" (ngSubmit)="checkCode(validations_form1.value)">
          
        <ion-list>

          <ion-item class="ion-no-padding" lines="none">
            
            <div class="form-group">
              <div class="icon-prepend">
                <ion-icon name="person"></ion-icon>
              </div>
              <input formControlName="code" placeholder="Código" type="number">
            </div>

          </ion-item>
            <div class="validation-errors">
                    <ng-container *ngFor="let validation of validation_messages1.code">
                      <div class="error-message" *ngIf="validations_form1.get('code').hasError(validation.type) && (validations_form1.get('code').dirty || validations_form1.get('code').touched)">
                        {{ validation.message }}
                      </div>
                    </ng-container>
                  </div>

        </ion-list>

        <button type="submit" class="bmb-btn t-4" [disabled]="!validations_form1.valid">Aceptar</button>

        <br>

        <span class="already">Ya tengo una cuenta, <span [routerLink]="['/login']" routerDirection="root">Acceder</span></span>

      </form>


      <!--  -->

      <form class="form" *ngIf="step == 3" [formGroup]="validations_form2" (ngSubmit)="changePassword(validations_form2.value)">
          
        <ion-list>

          <ion-item class="ion-no-padding" lines="none">
            
            <div class="form-group">
              <div class="icon-prepend">
                <ion-icon name="lock-closed-outline"></ion-icon>
              </div>
              <input formControlName="password" placeholder="Password" [type]="show_password_0" name="">
              <div class="icon-append">
                <ion-icon name="eye" (click)="changeView(0)"></ion-icon>
              </div>
            </div>

          </ion-item>
            <div class="validation-errors">
                    <ng-container *ngFor="let validation of validation_messages2.password">
                      <div class="error-message" *ngIf="validations_form2.get('password').hasError(validation.type) && (validations_form2.get('password').dirty || validations_form2.get('password').touched)">
                        {{ validation.message }}
                      </div>
                    </ng-container>
                  </div>

          <ion-item class="ion-no-padding" lines="none">
            
            <div class="form-group">
              <div class="icon-prepend">
                <ion-icon name="lock-closed-outline"></ion-icon>
              </div>
              <input formControlName="repeat_password" placeholder="Password" [type]="show_password_1" name="">
              <div class="icon-append">
                <ion-icon name="eye" (click)="changeView(1)"></ion-icon>
              </div>
            </div>

          </ion-item>
            <div class="validation-errors">
                    <ng-container *ngFor="let validation of validation_messages2.repeat_password">
                      <div class="error-message" *ngIf="validations_form2.get('repeat_password').hasError(validation.type) && (validations_form2.get('repeat_password').dirty || validations_form2.get('repeat_password').touched)">
                        {{ validation.message }}
                      </div>
                    </ng-container>
                  </div>

        </ion-list>

        <button type="submit" class="bmb-btn t-4" [disabled]="!validations_form2.valid">Cambiar contraseña</button>

        <br>

        <span class="already">Ya tengo una cuenta, <span [routerLink]="['/login']" routerDirection="root">Acceder</span></span>

      </form>
    </div>

  </div>

</ion-content>